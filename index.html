<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>مؤسسة عيسى الشيبة</title>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%;width:100%}
    body{
      font-family:"Cairo",sans-serif;
      position:relative;
      overflow:hidden;
      background:#fff; /* الخلفية بيضاء */
      color:#333;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      opacity: 1; /* يجب أن تكون الشفافية 1 عند التحميل الأولي */
      transition:opacity .6s ease; /* لإضافة تأثير تلاشي سلس */
    }

    /* الخلفية بعد اختفاء الـ splash */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      /* تم التعديل هنا */
      background:url('images/logo.png') center/contain no-repeat;
      background-size: 42%; /* حجم مناسب */
      background-position:center top 90px; /* اللوجو يبان فوق الأزرار */
      opacity:0.12; /* شفافية كعلامة مائية */
      z-index:0;
      pointer-events:none;
      transform-origin:center;
      animation:bgZoom 12s ease-in-out infinite alternate;
      transition:opacity .6s ease;
    }
    body.splash-active::before{opacity:0}

    /* شاشة البداية (Splash Screen) */
    .splash{
      position:fixed;
      inset:0;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      z-index:100;
      transition:transform 1.2s ease,opacity 1s ease;
      opacity:1;
      transform:translateY(0);
    }
    .splash.hide{
      opacity:0;
      pointer-events:none;
      transform:translateY(-100%);
    }

    .splash img{
      width:200px;
      height:auto;
      margin-bottom:20px;
      animation:pulse 2s infinite;
    }

    /* أيقونة التحميل (Loader) */
    .loader{
      border:4px solid #f3f3f3;
      border-top:4px solid #007bff;
      border-radius:50%;
      width:40px;
      height:40px;
      animation:spin 1s linear infinite;
      transition:opacity .5s ease;
    }
    .loader.hide{opacity:0}

    /* قائمة الخيارات (الأزرار) */
    .options{
      max-width:400px;
      width:100%;
      opacity:0;
      transition:opacity .8s ease;
      display:grid;
      gap:20px;
    }
    .options.visible{opacity:1}

    .options button{
      width:100%;
      background:#007bff;
      color:#fff;
      padding:20px;
      border:none;
      border-radius:12px;
      font-size:1.2rem;
      font-weight:600;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:15px;
      box-shadow:0 4px 6px rgba(0,0,0,.1);
      transition:transform .3s,box-shadow .3s,opacity .4s ease,background-color .3s;
      opacity:0;
      transform:translateY(20px);
    }
    .options button:hover{
      background-color:#0056b3;
      box-shadow:0 6px 10px rgba(0,0,0,.2);
      transform:translateY(-2px);
    }
    .options button.show{
      opacity:1;
      transform:translateY(0);
    }
    .btn-icon{width:28px;height:28px;stroke-width:2.5}
    .btn-text{display:flex;flex-direction:column;text-align:start;line-height:1.2}
    .btn-text .en{font-size:.9rem;opacity:.8;font-weight:400}

    /* الحركات (Animations) */
    @keyframes spin{
      0%{transform:rotate(0deg)}
      100%{transform:rotate(360deg)}
    }
    @keyframes pulse{
      0%{transform:scale(1)}
      50%{transform:scale(1.05)}
      100%{transform:scale(1)}
    }
    @keyframes bgZoom{
      0%{transform:scale(1.0)}
      100%{transform:scale(1.1)}
    }
  </style>
</head>
<body class="splash-active">
  <div id="splash" class="splash">
    <img src="images/logo.png" alt="شعار المؤسسة">
    <div id="loader" class="loader"></div>
  </div>

  <div id="options" class="options">
    <button onclick="goTo('business.html')">
      <i data-lucide="briefcase" class="btn-icon"></i>
      <div class="btn-text">
        <span class="ar">قسم خدمات رجال الأعمال</span>
        <span class="en">Business Services Department</span>
      </div>
    </button>

    <button onclick="goTo('maintenance.html')">
      <i data-lucide="wrench" class="btn-icon"></i>
      <div class="btn-text">
        <span class="ar">قسم الصيانة العامة و الديكور</span>
        <span class="en">General Maintenance & Decoration</span>
      </div>
    </button>
  </div>

  <script>
    lucide.createIcons();

    function goTo(page){
      // عند الانتقال: نجعل الشفافية 0 (تلاشي للخارج)
      document.body.style.opacity = "0";
      setTimeout(()=> window.location.href = page, 600);
    }

    // الكود الذي تم إضافته لحل مشكلة الصفحة البيضاء عند الرجوع
    window.addEventListener('pageshow', function(event) {
      if (event.persisted) {
        // إذا تم استعادة الصفحة من ذاكرة المتصفح المؤقتة (زر الرجوع)،
        // نضمن أن تكون الشفافية (Opacity) كاملة (1)
        document.body.style.opacity = '1';
      }
    });

    // كود شاشة البداية الأصلي
    setTimeout(()=>{
      const splash = document.getElementById('splash');
      const loader = document.getElementById('loader');
      splash.classList.add('hide');
      loader.classList.add('hide');

      setTimeout(()=>{
        splash.style.display = 'none';
        loader.style.display = 'none';
        document.body.classList.remove('splash-active');

        const options = document.getElementById('options');
        options.classList.add('visible');
        const buttons = options.querySelectorAll('button');
        buttons.forEach((btn, i)=>{
          setTimeout(()=> btn.classList.add('show'), i * 260);
        });

        lucide.createIcons();
      }, 900);
    }, 3000);
  </script>
</body>
</html>